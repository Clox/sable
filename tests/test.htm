<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.0.2/cleave.min.js" integrity="sha512-SvgzybymTn9KvnNGu0HxXiGoNeOi0TTK7viiG0EGn2Qbeu/NFi3JdWrJs2JHiGA1Lph+dxiDv5F9gDlcgBzjfA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="../src/tablance.js"></script>
	<link rel="stylesheet" href="../styles/style.min.css">

	<script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">

	<script>
		document.addEventListener("DOMContentLoaded", ()=>{
			function descFunc(dataRow,col,rowIndex,colIndex) {
				return `foobar ${rowIndex} - ${dataRow.descLetter}`
			}
			const myTablanceCols=[{type:"expand"}
				,{id:"desc",title:"Description",edit:{dataType:"text",maxLength:5,placeholder:"placeholder"}
					,render:descFunc}
				,{id:"amount",title:"Amount",width:"70px"},{id:"balance",title:"Balance",width:"70px"}];
			
			
			const myExpansion={type:"list",titlesColWidth:"8em",entries:[
				{type:"field",title:"Select",id:"sel",edit:{dataType:"select"
															,options:[{text:"banana",value:1},{text:"apple",value:2}]}},
				{type:"field",title:"Date",id:"date",edit:{dataType:"date"}},
				{type:"repeated",id:"repeatedField",entry:
					{type:"field",title:"repeated row",id:"foo"}
				},
				{type:"group",title:"förordnande",entries:[
						{type:"repeated",id:"custodianshipChanges",entry:
						{type:"group",closedRender:data=>`${data.type} sedan ${data.date}`,entries:[
								{type:"field",title:"Datum",id:"date"},
								{type:"field",title:"Typ av ställföreträdarskap",id:"type"}
						]}
					}
				]},
				{type:"group",title:"grupp",entries:[
					{type:"field",title:"Hello",id:"hello",edit:{dataType:"text"}},
					{type:"field",title:"World",id:"world",edit:{dataType:"text"}},
					{type:"field",title:"Emptytest",id:"emptykey",edit:{dataType:"text"}}]},
				{type:"field",title:"Foobar One",id:"foobar1",edit:{dataType:"text",maxLength:5,placeholder:"boo"}},
				{type:"field",title:"Foobar Two",id:"foobar2"},
				{type:"list",title:"Baz entries",titlesColWidth:"6em",entries:[
					{type:"field",title:"Baz One",id:"baz1"},
					{type:"field",title:"Baz Two",id:"baz2"},
					{type:"field",title:"Cleave-datum",id:"date",
						edit:{cleave:{date: true,delimiter: '-',datePattern: ['Y','m','d']},placeholder:"ÅÅÅÅ-MM-DD"}},
					{type:"field",title:"Anteckningar",id:"notes",maxHeight:150,edit:{dataType:"textarea"}},
				]}
			]};
			



			const myTablance=new Tablance(document.getElementById("tablanceContainer1"),myTablanceCols,true,true
				,myExpansion,{});

			
			for (let i=0; i<3; i++) {
				let data=[];
				for (let ii=0; ii<1000; ii++) {
					data.push({desc:"dummy",foobar1:i+ii,foobar2:i*2+ii*2,descLetter:String.fromCharCode(ii)
						,amount:(Math.random()*100).toFixed(2),balance:(Math.random()*100).toFixed(2),baz1:69,baz2:70
						,hello:"Hallå",world:"Världen"
						,sel:Math.round(Math.random())+1
						,repeatedField:[{foo:"row one in repeated"},{foo:"row two in repeated"}]
						,repeatedGroup:[{foo1:"blahblah",foo2:"lalala"},{foo1:"bloj",foo2:"kapapa"}]
						,custodianshipChanges:[
											{date:"2021-01-01",type:"God Man"},{date:"2022-01-01",type:"Förvaltare"}]});
				}
				myTablance.addData(data);
			}
		});
	</script>
</head>

<body>
	<input value="input for testing tab-focusing"/>
	<div id="tablanceContainer1" style="overflow:hidden;resize: both;height:700px;width:700px"></div>
	<br />
	<div id="tablanceContainer2" style="overflow:hidden; resize: both;"></div>
</body>